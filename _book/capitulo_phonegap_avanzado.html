<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>PhoneGap 2. Avanzado | Introducción</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="./capitulo_laravel_1.html" />
    
    
    <link rel="prev" href="./capitulo_phonegap.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book"  data-level="11" data-basepath="." data-revision="1422271212353">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introducción
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="capitulo_introduccion_web.html">
            
                
                    <a href="./capitulo_introduccion_web.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Introducción al desarrollo Web
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="capitulo_introduccion_javascript.html">
            
                
                    <a href="./capitulo_introduccion_javascript.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Introducción a JavaScript
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="capitulo_diseno_responsive.html">
            
                
                    <a href="./capitulo_diseno_responsive.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         Diseño Responsive
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="capitulo_diseno_responsive_avanzado.html">
            
                
                    <a href="./capitulo_diseno_responsive_avanzado.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Diseño Responsive avanzado
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="capitulo_jquery_mobile.html">
            
                
                    <a href="./capitulo_jquery_mobile.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         JQuery Mobile
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="capitulo_jquery_mobile_avanzado.html">
            
                
                    <a href="./capitulo_jquery_mobile_avanzado.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         JQuery Mobile avanzado
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="capitulo_sencha_touch_1.html">
            
                
                    <a href="./capitulo_sencha_touch_1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         Sencha Touch 1. Introducción
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="capitulo_sencha_touch_2.html">
            
                
                    <a href="./capitulo_sencha_touch_2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         Sencha Touch 2. Componentes
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="capitulo_sencha_touch_3.html">
            
                
                    <a href="./capitulo_sencha_touch_3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         Sencha Touch 3. Almacenamiento
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="capitulo_phonegap.html">
            
                
                    <a href="./capitulo_phonegap.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         PhoneGap 1. Introducción
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="11" data-path="capitulo_phonegap_avanzado.html">
            
                
                    <a href="./capitulo_phonegap_avanzado.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         PhoneGap 2. Avanzado
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="capitulo_laravel_1.html">
            
                
                    <a href="./capitulo_laravel_1.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         Laravel 1. Introducción
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="13" data-path="capitulo_laravel_2.html">
            
                
                    <a href="./capitulo_laravel_2.html">
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                         Laravel 2. Controladores, filtros y formularios
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="14" data-path="capitulo_laravel_3.html">
            
                
                    <a href="./capitulo_laravel_3.html">
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                         Laravel 3. Base de datos
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="15" data-path="capitulo_laravel_4.html">
            
                
                    <a href="./capitulo_laravel_4.html">
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                         Laravel 4. Datos de entrada y control de usuarios
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="16" data-path="capitulo_laravel_5.html">
            
                
                    <a href="./capitulo_laravel_5.html">
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                         Laravel 5. Paquetes, Rest y Curl
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="17" data-path="capitulo_rest.html">
            
                
                    <a href="./capitulo_rest.html">
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                         Servicios Rest
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Introducción</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_15">
                    
                        <h1 id="phonegap-avanzado">PhoneGap avanzado</h1>
<p>En esta segunda parte vamos a ver como gestionar los <em>plugins</em> de una aplicación, las opciones de configuración, la gestión de eventos y el uso básico de la API de PhoneGap.</p>
<!-- ********************************************************************* -->
<h2 id="personalizar-plataformas-mediante-_merges_">Personalizar plataformas mediante <em>merges</em></h2>
<p>En ocasiones se hace necesario especificar algunos recursos de forma separada para una plataforma. En este caso no deberíamos modificar la carpeta correspondiente de <code>platforms</code> ya se sobreescribiría en la próxima compilación.</p>
<p>Con este propósito se creo la carpeta <em>merges</em>, la cual contiene los assets que se han de copiar o reemplazar para las plataformas especificadas. La estructura de esta carpeta es la siguiente:</p>
<ul>
<li>En primer lugar tendremos que crear subcarpetas con el mismo nombre que la carpeta de <code>platforms</code> que deseemos sobreescribir.</li>
<li>Dentro de esa subcarpeta crearemos una estructura espejo a la carpeta <code>www</code>, pero únicamente situando los ficheros y carpetas que deseemos reemplazar.</li>
</ul>
<p>Por ejemplo, el fichero <code>merges/android/css/overrides.css</code> sobreescribiría el css situado en <code>www/css/overrides.css</code> pero solamente para la plataforma Android.</p>
<p>Si por ejemplo quisieramos especificar un estilo distinto para la plataforma iOS, podríamos almacenar dicho recurso en:</p>
<pre><code class="lang-bash">merges/ios/css/overrides.css
</code></pre>
<p>El cual cargaríamos desde el fichero <code>index.html</code> situado en <code>www/index.html</code> de forma normal:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/css"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"css/overrides.css"</span> /&gt;</span>
</code></pre>
<p>Además tendríamos que crear un css vacío (o con algún estilo por defecto) en <code>www/css/overrides.css</code> que utilicen el resto de plataformas que no sean &quot;iOS&quot; para evitar que apareciera un error de fichero no encontrado.</p>
<!-- ********************************************************************* -->
<h2 id="fichero-de-configuracin">Fichero de configuración</h2>
<p>En cada proyecto se incluye un fichero de configuración <code>config.xml</code> que nos permite establecer las principales opciones de configuración de nuestra aplicación de forma global (para todas las plataformas destino).</p>
<p>Este fichero se situa en la carpeta raíz del proyecto (<code>app/config.xml</code>), pero por cuestiones de compatibilidad con versiones anteriores de PhoneGap también está soportado desde la ruta: <code>app/www/config.xml</code></p>
<p>Al compilar un proyecto (mediante el comando <code>build</code> o <code>run</code> del CLI) se crean versiones específicas de este fichero de configuración para cada plataforma, lo que nos permite establecer configuraciones más específicas. La ruta donde el fichero es copiado varía dependiendo de la plataforma, por ejemplo:</p>
<pre><code class="lang-bash">app/platforms/ios/AppName/config.xml
app/platforms/blackberry10/www/config.xml
app/platforms/android/res/xml/config.xml
</code></pre>
<p>Para más información sobre configuraciones específicas podéis consultar la sección &quot;<em>Configuration</em>&quot; de cada plataforma en:</p>
<p><a href="http://docs.phonegap.com/en/edge/guide_platforms_index.md.html#Platform%20Guides" target="_blank">http://docs.phonegap.com/en/edge/guide_platforms_index.md.html#Platform%20Guides</a></p>
<p>A continuación se describen las opciones de configuración generales para todas las plataformas, pero además de estas hay muchas específicas dependientes de la plataforma:</p>
<ul>
<li><p>iOS Configuration: <a href="http://docs.phonegap.com/en/edge/guide_platforms_ios_config.md.html#iOS%20Configuration" target="_blank">http://docs.phonegap.com/en/edge/guide_platforms_ios_config.md.html#iOS%20Configuration</a></p>
</li>
<li><p>Android Configuration: <a href="http://docs.phonegap.com/en/edge/guide_platforms_android_config.md.html#Android%20Configuration" target="_blank">http://docs.phonegap.com/en/edge/guide_platforms_android_config.md.html#Android%20Configuration</a></p>
</li>
<li><p>BlackBerry 10 Configuration: <a href="http://docs.phonegap.com/en/edge/guide_platforms_blackberry10_config.md.html#BlackBerry%2010%20Configuration" target="_blank">http://docs.phonegap.com/en/edge/guide_platforms_blackberry10_config.md.html#BlackBerry%2010%20Configuration</a></p>
</li>
</ul>
<!-- ********************************** -->
<h3 id="elementos-de-configuracin-principales">Elementos de configuración principales</h3>
<p>A continuación se muestran las primeras líneas del fichero <code>config.xml</code> generado por defecto al crear un nuevo proyecto de PhoneGap. Esta configuración es compatible para todas las plataformas:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">widget</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"com.example.hello"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"0.0.1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>HolaMundo<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">description</span>&gt;</span>
        Ejemplo de aplicación con PhoneGap
    <span class="hljs-tag">&lt;/<span class="hljs-title">description</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">author</span> <span class="hljs-attribute">email</span>=<span class="hljs-value">"email@email.com"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"http://miweb.com"</span>&gt;</span>
        Nombre autor
    <span class="hljs-tag">&lt;/<span class="hljs-title">author</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">content</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"index.html"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">access</span> <span class="hljs-attribute">origin</span>=<span class="hljs-value">"*"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">preference</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"permissions"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"none"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">preference</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"..."</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"..."</span> /&gt;</span>
    ...
<span class="hljs-tag">&lt;/<span class="hljs-title">widget</span>&gt;</span>
</code></pre>
<p>Donde:</p>
<ul>
<li><p><code>&lt;widget&gt;</code>: su atributo <code>id</code> especifica el paquete de la aplicación (usando el <em>reverse-domain-name</em>), y su atributo <code>version</code> es el número completo de versión de la app (siguiendo la notación <em>major/minor/patch</em>, ver más información en la sección &quot;Versión de la aplicación&quot;).</p>
</li>
<li><p><code>&lt;name&gt;</code>: especifica el nombre del proyecto y de la app, es el que aparecería al instalar la app junto a su icono y en los <em>markets</em>.</p>
</li>
<li><p><code>&lt;description&gt;</code> y <code>&lt;author&gt;</code>: son metadatos e información de contacto que se utilizará al publicar la app en los <em>markets</em>.</p>
</li>
<li><p><code>&lt;content&gt;</code>: es un atributo opcional para indicar la página inicial de nuestro código. Por defecto se utilizará <code>index.html</code>.</p>
</li>
<li><p><code>&lt;access&gt;</code>: define un conjunto de dominios externos a los que se le permite acceder. Por defecto, al indicar <code>*</code> se le permite acceder a cualquier servidor. Para más información consultar la ayuda sobre <em>Domain Whitelist</em>.</p>
</li>
<li><p><code>&lt;preference&gt;</code>: establece opciones de configuración siguiendo la notación de pares nombre-valor, sin distinguir mayúsculas y minúsculas. En las siguientes secciones se tratarán estas opciones de configuración, las cuales pueden ser genéricas o específicas para algunas plataformas.</p>
</li>
</ul>
<p>Las preferencias globales se aplicarán para todas las plataformas para las que se compile el proyecto.</p>
<ul>
<li><em>Fullscreen</em> permite mostrar u ocultar la barra de estado de la pantalla. El valor por defecto es <em>false</em>. Ejemplo:</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">preference</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Fullscreen"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span>
</code></pre>
<ul>
<li><em>Orientation</em> permite controlar si se ha de permitir que la pantalla gire o no. Los valores permitidos son: <em>default</em>, <em>landscape</em>, o <em>portrait</em>, siendo <em>default</em> el valor por defecto (el cual permite ambas orientaciones). Ejemplo:</li>
</ul>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">preference</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Orientation"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"landscape"</span> /&gt;</span>
</code></pre>
<p>Además de todas estas opciones de configuración también es posible establecer los iconos o <em>splashscreens</em> que se utilizarán para cada plataforma. En las siguientes secciones se tratarán estos temas más en profundidad.</p>
<!-- ********************************************************************* -->
<h3 id="iconos">Iconos</h3>
<p>Los iconos se pueden especificar utilizando la etiqueta <code>&lt;icon&gt;</code> en el fichero <code>config.xml</code>, por ejemplo:</p>
<pre><code class="lang-bash">&lt;icon src=<span class="hljs-string">"res/ios/icon.png"</span> platform=<span class="hljs-string">"ios"</span> width=<span class="hljs-string">"57"</span> height=<span class="hljs-string">"57"</span> density=<span class="hljs-string">"mdpi"</span> /&gt;
</code></pre>
<p>Donde:</p>
<ul>
<li>src: (requerido) localización de la imagen relativa a la carpeta del proyecto.</li>
<li>platform: (opcional) plataforma para la que se utilizará el icono.</li>
<li>width: (opcional) ancho en píxeles.</li>
<li>height: (opcional) alto en píxeles.</li>
<li>density: (opcional) parámetro específico de Android para establecer la densidad del icono.</li>
</ul>
<p>Para establecer un icono que se utilizará en todas las plataformas podemos establecer la siguiente configuración:</p>
<pre><code class="lang-bash">&lt;icon src=<span class="hljs-string">"res/icon.png"</span> /&gt;
</code></pre>
<p>En caso de no especificar ningún logo por defecto se utilizará el icono de Apache Cordova.</p>
<p>Podemos utilizar tantas etiquetas como sea necesario para establecer los iconos para cada plataforma, incluso podemos indicar varios para una misma plataforma con distintos tamaños o densidades. Para clarificar la asignación también podemos agruparlos de la forma:</p>
<pre><code class="lang-bash">&lt;platform name=<span class="hljs-string">"android"</span>&gt;
    &lt;icon src=<span class="hljs-string">"res/android/ldpi.png"</span> density=<span class="hljs-string">"ldpi"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/android/mdpi.png"</span> density=<span class="hljs-string">"mdpi"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/android/hdpi.png"</span> density=<span class="hljs-string">"hdpi"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/android/xhdpi.png"</span> density=<span class="hljs-string">"xhdpi"</span> /&gt;
&lt;/platform&gt;
</code></pre>
<p>Otro ejemplo para establecer los iconos de iOS:</p>
<pre><code class="lang-bash">&lt;platform name=<span class="hljs-string">"ios"</span>&gt;
    &lt;!-- iOS <span class="hljs-number">8.0</span>+ --&gt;
    &lt;!-- iPhone <span class="hljs-number">6</span> Plus  --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-60@3x.png"</span> width=<span class="hljs-string">"180"</span> height=<span class="hljs-string">"180"</span> /&gt;
    &lt;!-- iOS <span class="hljs-number">7.0</span>+ --&gt;
    &lt;!-- iPhone / iPod Touch  --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-60.png"</span> width=<span class="hljs-string">"60"</span> height=<span class="hljs-string">"60"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-60@2x.png"</span> width=<span class="hljs-string">"120"</span> height=<span class="hljs-string">"120"</span> /&gt;
    &lt;!-- iPad --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-76.png"</span> width=<span class="hljs-string">"76"</span> height=<span class="hljs-string">"76"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-76@2x.png"</span> width=<span class="hljs-string">"152"</span> height=<span class="hljs-string">"152"</span> /&gt;
    &lt;!-- iOS <span class="hljs-number">6.1</span> --&gt;
    &lt;!-- Spotlight Icon --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-40.png"</span> width=<span class="hljs-string">"40"</span> height=<span class="hljs-string">"40"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-40@2x.png"</span> width=<span class="hljs-string">"80"</span> height=<span class="hljs-string">"80"</span> /&gt;
    &lt;!-- iPhone / iPod Touch --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon.png"</span> width=<span class="hljs-string">"57"</span> height=<span class="hljs-string">"57"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon@2x.png"</span> width=<span class="hljs-string">"114"</span> height=<span class="hljs-string">"114"</span> /&gt;
    &lt;!-- iPad --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-72.png"</span> width=<span class="hljs-string">"72"</span> height=<span class="hljs-string">"72"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-72@2x.png"</span> width=<span class="hljs-string">"144"</span> height=<span class="hljs-string">"144"</span> /&gt;
    &lt;!-- iPhone Spotlight and Settings Icon --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-small.png"</span> width=<span class="hljs-string">"29"</span> height=<span class="hljs-string">"29"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-small@2x.png"</span> width=<span class="hljs-string">"58"</span> height=<span class="hljs-string">"58"</span> /&gt;
    &lt;!-- iPad Spotlight and Settings Icon --&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-50.png"</span> width=<span class="hljs-string">"50"</span> height=<span class="hljs-string">"50"</span> /&gt;
    &lt;icon src=<span class="hljs-string">"res/ios/icon-50@2x.png"</span> width=<span class="hljs-string">"100"</span> height=<span class="hljs-string">"100"</span> /&gt;
&lt;/platform&gt;
</code></pre>
<!-- ********************************************************************* -->
<h3 id="_splash-screens_"><em>Splash Screens</em></h3>
<p>Igual que la configuración de los iconos, PhoneGap también permite definir un <em>splashscreen</em> para las distintas plataformas, por ejemplo:</p>
<pre><code class="lang-bash">&lt;platform name=<span class="hljs-string">"android"</span>&gt;
    &lt;!-- you can use any density that exists <span class="hljs-keyword">in</span> the Android project --&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-land-hdpi.png"</span> density=<span class="hljs-string">"land-hdpi"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-land-ldpi.png"</span> density=<span class="hljs-string">"land-ldpi"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-land-mdpi.png"</span> density=<span class="hljs-string">"land-mdpi"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-land-xhdpi.png"</span> density=<span class="hljs-string">"land-xhdpi"</span>/&gt;

    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-port-hdpi.png"</span> density=<span class="hljs-string">"port-hdpi"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-port-ldpi.png"</span> density=<span class="hljs-string">"port-ldpi"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-port-mdpi.png"</span> density=<span class="hljs-string">"port-mdpi"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/android/splash-port-xhdpi.png"</span> density=<span class="hljs-string">"port-xhdpi"</span>/&gt;
&lt;/platform&gt;

&lt;platform name=<span class="hljs-string">"ios"</span>&gt;
    &lt;!-- images are determined by width and height. The following are supported --&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default~iphone.png"</span> width=<span class="hljs-string">"320"</span> height=<span class="hljs-string">"480"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default@2x~iphone.png"</span> width=<span class="hljs-string">"640"</span> height=<span class="hljs-string">"960"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-Portrait~ipad.png"</span> width=<span class="hljs-string">"768"</span> height=<span class="hljs-string">"1024"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-Portrait@2x~ipad.png"</span> width=<span class="hljs-string">"1536"</span> height=<span class="hljs-string">"2048"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-Landscape~ipad.png"</span> width=<span class="hljs-string">"1024"</span> height=<span class="hljs-string">"768"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-Landscape@2x~ipad.png"</span> width=<span class="hljs-string">"2048"</span> height=<span class="hljs-string">"1536"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-568h@2x~iphone.png"</span> width=<span class="hljs-string">"640"</span> height=<span class="hljs-string">"1136"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-667h.png"</span> width=<span class="hljs-string">"750"</span> height=<span class="hljs-string">"1334"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-736h.png"</span> width=<span class="hljs-string">"1242"</span> height=<span class="hljs-string">"2208"</span>/&gt;
    &lt;splash src=<span class="hljs-string">"res/screen/ios/Default-Landscape-736h.png"</span> width=<span class="hljs-string">"2208"</span> height=<span class="hljs-string">"1242"</span>/&gt;
&lt;/platform&gt;

&lt;preference name=<span class="hljs-string">"SplashScreenDelay"</span> value=<span class="hljs-string">"10000"</span> /&gt;
</code></pre>
<!-- ********************************** -->
<h3 id="versin-de-la-aplicacin">Versión de la aplicación</h3>
<p>Tanto Android como iOS soportan una cadena con una nombre (o número) de versión alternativo además del que se utiliza en el <em>market</em>. En Android es el <em>versionCode</em> y en iOS el <em>CFBundleVersion</em>. A continuación se muestra como podemos establecer estas versiones en el <code>config.xml</code>:</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">widget</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"io.cordova.hellocordova"</span>
    <span class="hljs-attribute">version</span>=<span class="hljs-value">"0.0.1"</span>
    <span class="hljs-attribute">android-versionCode</span>=<span class="hljs-value">"7"</span>
    <span class="hljs-attribute">ios-CFBundleVersion</span>=<span class="hljs-value">"3.3.3"</span>&gt;</span>
</code></pre>
<p>Si esta versión no se especifica se construirá a partir del atributo <code>version</code>. Como se ha indicado este atributo se construye siguiendo la notación <em>major/minor/patch</em>, por lo que se usarán estos valores de la forma:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// version = MAJOR.MINOR.PATCH-whatever</span>
versionCode = PATCH + MINOR * <span class="hljs-number">100</span> + MAJOR * <span class="hljs-number">10000</span>
CFBundleVersion = <span class="hljs-string">"MAJOR.MINOR.PATCH"</span>
</code></pre>
<!-- ********************************************************************* -->
<h2 id="eventos">Eventos</h2>
<p>La librería de PhoneGap incluye una serie de eventos JavaScript a los cuales podemos escuchar para realizar determinadas acciones cuando se produzcan. Estos eventos son:</p>
<ul>
<li><em>deviceready</em></li>
<li><em>pause</em></li>
<li><em>resume</em></li>
<li><em>backbutton</em></li>
<li><em>menubutton</em></li>
<li><em>searchbutton</em></li>
<li><em>startcallbutton</em></li>
<li><em>endcallbutton</em></li>
<li><em>volumedownbutton</em></li>
<li><em>volumeupbutton</em></li>
</ul>
<p>Si instalamos el <em>plugin</em> para el control de la batería (<em>org.apache.cordova.battery-status</em>) se añadirán los siguientes eventos (ver sección de <em>plugins</em>):</p>
<ul>
<li><em>batterycritical</em></li>
<li><em>batterylow</em></li>
<li><em>batterystatus</em></li>
</ul>
<p>Si instalamos el <em>plugin</em> para obtener información de la red (<em>org.apache.cordova.network-information</em>) se añadirán los siguientes eventos (ver sección de <em>plugins</em>:</p>
<ul>
<li><em>online</em></li>
<li><em>offline</em></li>
</ul>
<p>En general para suscribirnos a un evento utilizaremos el siguiente código:</p>
<pre><code>document.addEventListener(&quot;nombre-evento&quot;, funcionCallback, false);
</code></pre><p>Donde:</p>
<ul>
<li><em>nombre-evento</em>: es el evento al que queremos escuchar.</li>
<li><em>funcionCallback</em>: es la función que se llamará cuando el evento se produzca.</li>
<li><em>false</em>: afecta al orden en el que se lanzará el evento, al inicio (cuando se producte) o al final (cuando ya ha terminado).</li>
</ul>
<p>A continuación se describen los principales eventos de PhoneGap y se incluyen ejemplos de uso.</p>
<!-- ******************************** -->
<h3 id="_deviceready_"><em>deviceready</em></h3>
<p>Este evento se ejecuta cuando la librería de PhoneGap se ha cargado completamente. Su uso es esencial para cualquier aplicación y lo tendremos que utilizar de forma inicial para asegurarnos de que la API se ha cargado completamente.</p>
<p>A continuación se incluye un ejemplo de uso:</p>
<pre><code class="lang-html"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Ejemplo<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"cordova.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span><span class="javascript">

    <span class="hljs-comment">// Esperamos a que se cargue la API de PhoneGap</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onLoad</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"deviceready"</span>, onDeviceReady, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// La API de PhoneGap ya está disponible</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onDeviceReady</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// Ya podemos usar la librería de PhoneGap</span>
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"onLoad()"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<!-- ******************************** -->
<h3 id="_pause_"><em>pause</em></h3>
<p>Este evento se produce cuando la aplicación pasa a segundo plano. A continuación se incluye un ejemplo completo de uso:</p>
<pre><code class="lang-html"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Pause Example<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"cordova.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span><span class="javascript">

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onLoad</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"deviceready"</span>, onDeviceReady, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// Añadimos el evento cuando la API esté lista</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onDeviceReady</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"pause"</span>, onPause, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// Se ha producido el evento pause!</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onPause</span><span class="hljs-params">()</span> </span>{
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"onLoad()"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<blockquote>
<p>En todos los eventos tendremos que esperar a que la API de PhoneGap termine de cargar.</p>
</blockquote>
<!-- ******************************** -->
<h3 id="_resume_"><em>resume</em></h3>
<p>Este evento se produce cuando la aplicación estaba en segundo plano y se vuelve a mostrar en primer plano. A continuación se incluye un ejemplo completo de uso:</p>
<pre><code class="lang-html"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Resume Example<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"cordova.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span><span class="javascript">

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onLoad</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"deviceready"</span>, onDeviceReady, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// Añadimos el evento cuando la API esté lista</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onDeviceReady</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"resume"</span>, onResume, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// Se ha producido el evento "resume"!</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onResume</span><span class="hljs-params">()</span> </span>{
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"onLoad()"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<!-- ******************************** -->
<h3 id="_backbutton_"><em>backbutton</em></h3>
<p>Este evento se produce cuando el usuario pulsa el botón atrás. A continuación se incluye un ejemplo completo de uso:</p>
<pre><code class="lang-html"><span class="hljs-doctype">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Back Button Example<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"cordova.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span><span class="javascript">

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onLoad</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"deviceready"</span>, onDeviceReady, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// Añadimos el evento cuando la API esté lista</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onDeviceReady</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"backbutton"</span>, onBackKeyDown, <span class="hljs-literal">false</span>);
    }

    <span class="hljs-comment">// Se ha producido el evento "backbutton"!</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onBackKeyDown</span><span class="hljs-params">()</span> </span>{
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span> <span class="hljs-attribute">onload</span>=<span class="hljs-value">"onLoad()"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</code></pre>
<p><strong>Salir de la aplicación</strong></p>
<p>Por defecto, al pulsar el botón <em>back</em> no se cerrará la aplicación. Si queremos que se cierre tendremos que hacer:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"backbutton"</span>, onBackKeyDown, <span class="hljs-literal">false</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onBackKeyDown</span><span class="hljs-params">()</span> </span>{
   navigator.app.exitApp()
}
</code></pre>
<p>Hemos de tener cuidado con esta funcionalidad porque cerrará la aplicación siempre que se pulse dicha tecla. Si nuestra aplicación tiene varias páginas y queremos que se use el botón <em>back</em> para volver a la página anterior y además que en la primera página cierre la aplicación tendremos que distinguir entre las páginas y solo cerrar en la primera.</p>
<!-- ******************************** -->
<h3 id="_menubutton_"><em>menubutton</em></h3>
<p>Este evento se produce cuando el usuario pulsa el botón menú. Para su utilización, igual que en el resto de casos, simplemente tendremos que hacer (ejemplo abreviado):</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"menubutton"</span>, onMenuKeyDown, <span class="hljs-literal">false</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onMenuKeyDown</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-comment">// Se ha producido el evento "menubutton"!</span>
}
</code></pre>
<!-- ******************************** -->
<h3 id="_volumedownbutton_"><em>volumedownbutton</em></h3>
<p>Este evento se produce cuando el usuario pulsa el botón para bajar el volumen. A continuación se incluye un ejemplo abreviado de uso:</p>
<pre><code>document.addEventListener(&quot;volumedownbutton&quot;, onVolumeDownKeyDown, false);

function onVolumeDownKeyDown() {
    // Se ha producido el evento &quot;volumedownbutton&quot;!
}
</code></pre><!-- ******************************** -->
<h3 id="_volumeupbutton_"><em>volumeupbutton</em></h3>
<p>Este evento se lanza cuando se pulsa el botón para subir el volumen. Igual que en el resto de casos, para su utilización tenemos que hacer:</p>
<pre><code>document.addEventListener(&quot;volumeupbutton&quot;, onVolumeUpKeyDown, false);

function onVolumeUpKeyDown() {
    // Se ha producido el evento &quot;volumeupbutton&quot;!
}
</code></pre><!-- ********************************************************************* -->
<h2 id="_plugings_"><em>Plugings</em></h2>
<p>PhoneGap, además de permitir encapsular aplicaciones Web y compilarlas como aplicaciones nativas para distintas plataformas móviles, nos brinda el acceso a características hardware de los dispositivos a través de su sistema de <em>plugins</em>. Por ejemplo tenemos disponibles <em>plugins</em> para trabajar con la cámara, brújula, geolocalización, etc.</p>
<p>Estos <em>plugins</em> se pueden añadir a nuestros proyectos según los necesitemos mediante el CLI de PhoneGap. A partir de la versión 3.0 de PhoneGap, al crear un nuevo proyecto no incluye ningún <em>plugin</em>, por lo que si queremos alguno tendremos que añadirlo manualmente.</p>
<p>PhoneGap también permite crear nuestros propios plugins (para más información consultar: &quot;<a href="http://docs.phonegap.com/en/edge/guide_hybrid_plugins_index.md.html" target="_blank">http://docs.phonegap.com/en/edge/guide_hybrid_plugins_index.md.html</a>&quot;), pero la opción más común es utilizar alguno de los ya disponibles.</p>
<!-- ******************************* -->
<h3 id="buscar-_plugins_">Buscar <em>plugins</em></h3>
<p>En la dirección &quot;<a href="http://plugins.cordova.io" target="_blank">http://plugins.cordova.io</a>&quot; podemos consultar la lista completa de todos los <em>plugins</em>, incluyendo los que han sido desarrollados por la comunidad.</p>
<p>También es posible utilizar el CLI para buscar <em>plugins</em> en este registro. Por ejemplo, para buscar un <em>pluging</em> para códigos de barras usaríamos:</p>
<pre><code class="lang-bash">$ phonegap plugin search bar code

com.phonegap.plugins.barcodescanner - You can use the BarcodeScanner plugin...
...
</code></pre>
<p>En este caso devuelve varios resultados, un <em>plugin</em> oficial de PhoneGap y varios desarrollados por la comunidad. Es importante destacar que las búsquedas no distinguen mayúsculas y minúsculas, por lo que también podríamos haber buscado &quot;Bar Code&quot;.</p>
<p>Si buscasemos únicamente por &quot;Bar&quot; obtendríamos muchos más resultados, incluyendo un <em>plugin</em> para trabajar con la barra de estado y otro para mostrar notificaciones:</p>
<pre><code class="lang-bash">$ phonegap plugin search bar

org.apache.cordova.statusbar - Cordova StatusBar Plugin
org.chromium.notifications - This plugin allows apps to show notifications <span class="hljs-keyword">in</span> the status bar.
...
</code></pre>
<!-- ******************************* -->
<h3 id="aadir-un-_plugin_">Añadir un <em>plugin</em></h3>
<p>Para añadir un plugin a un proyecto simplemente tenemos que indicar el repositorio que deseemos y el sistema se encargará de descargarlo e instalarlo. A continuación se incluye una lista de los <em>plugins</em> oficiales más utilizados y como tendríamos que instalarlos.</p>
<p><strong>Obtener información del dispositivo:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.device
</code></pre>
<p><strong>Información sobre la conexión y la batería:</strong> (ver sección sobre eventos)</p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.network-information
$ phonegap plugin add org.apache.cordova.battery-status
</code></pre>
<p><strong>Acelerómetro, brújula y geolocalización:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.device-motion
$ phonegap plugin add org.apache.cordova.device-orientation
$ phonegap plugin add org.apache.cordova.geolocation
</code></pre>
<p><strong>Cámara, reproducción y captura de contenidos multimedia:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.camera
$ phonegap plugin add org.apache.cordova.media-capture
$ phonegap plugin add org.apache.cordova.media
</code></pre>
<p><strong>Acceso a ficheros del dispositivo y de la red:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.file
$ phonegap plugin add org.apache.cordova.file-transfer
</code></pre>
<p><strong>Notificaciones mediante diálogos y vibración:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.dialogs
$ phonegap plugin add org.apache.cordova.vibration
</code></pre>
<p><strong>Contactos:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.contacts
</code></pre>
<p><strong>Globalización:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.globalization
</code></pre>
<p><strong><em>Splashscreen</em> o pantalla inicial:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.splashscreen
</code></pre>
<p><strong>Abrir nuevas ventanas de navegador (InAppBrowser):</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.inappbrowser
</code></pre>
<p><strong>Consola de depuración:</strong></p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.console
</code></pre>
<blockquote>
<p>Nota: los <em>plugins</em> se descargarán para las plataformas que tenga el proyecto actualmente instaladas. Si posteriormente se añaden más plataformas estos <em>plugins</em> se descargarán también de forma automática para la nueva plataforma.</p>
<p>Nota: al instalar un <em>plugin</em> de forma automática también se actualizarán los permisos necesarios para cada plataforma. Por ejemplo, en Android se actualizará el Manifest para solicitar los permisos necesarios.</p>
</blockquote>
<!-- ******************************* -->
<h3 id="ver-los-_plugins_-instalados">Ver los <em>plugins</em> instalados</h3>
<p>Para ver los <em>plugins</em> añadidos al proyecto actual podemos usar alguno de los siguientes comandos (todos son equivalentes), los cuales mostrarán un listado de paquetes instalados, junto con su versión y nombre:</p>
<pre><code class="lang-bash">$ phonegap plugin

<span class="hljs-comment"># O también:</span>
$ phonegap plugin ls

<span class="hljs-comment"># O también:</span>
$ phonegap plugin list

org.apache.cordova.battery-status <span class="hljs-number">0.2</span>.<span class="hljs-number">12</span> <span class="hljs-string">"Battery"</span>
org.apache.cordova.device <span class="hljs-number">0.2</span>.<span class="hljs-number">13</span> <span class="hljs-string">"Device"</span>
org.apache.cordova.dialogs <span class="hljs-number">0.2</span>.<span class="hljs-number">11</span> <span class="hljs-string">"Notification"</span>
org.apache.cordova.network-information <span class="hljs-number">0.2</span>.<span class="hljs-number">14</span> <span class="hljs-string">"Network Information"</span>
org.apache.cordova.splashscreen <span class="hljs-number">0.3</span>.<span class="hljs-number">5</span> <span class="hljs-string">"Splashscreen"</span>
org.apache.cordova.vibration <span class="hljs-number">0.3</span>.<span class="hljs-number">12</span> <span class="hljs-string">"Vibration"</span>
</code></pre>
<!-- ******************************* -->
<h3 id="eliminar-un-_plugin_">Eliminar un <em>plugin</em></h3>
<p>Para eliminar un <em>plugin</em> simplemente tenemos que referirnos a él por el mismo nombre del paquete que utilizamos para su instalación (o que podemos ver si ejecutamos <code>phonegap plugin ls</code>). Por ejemplo, para eliminar el soporte a la consola de depuración ejecutaríamos:</p>
<pre><code class="lang-bash">$ phonegap plugin rm org.apache.cordova.console

<span class="hljs-comment"># O también:</span>
$ phonegap plugin remove org.apache.cordova.console
</code></pre>
<!-- ******************************* -->
<h3 id="aadir-o-elminar-varios-_plugins_-a-la-vez">Añadir o elminar varios <em>plugins</em> a la vez</h3>
<p>Si queremos añadir o eliminar varios <em>plugins</em> a la vez simplemente tenemos que indicarlos usando el mismo comando pero separados por espacios, de la forma:</p>
<pre><code class="lang-bash">$ phonegap plugin add org.apache.cordova.console org.apache.cordova.device

$ phonegap plugin rm org.apache.cordova.console org.apache.cordova.device
</code></pre>
<!-- ******************************* -->
<h3 id="advanced-plugin-options">Advanced Plugin Options</h3>
<p>Para opciones más avanzadas sobre la gestión de <em>plugins</em>, como por ejemplo instalar una versión en concreto de un <em>plugin</em> o instalar desde otro repositorio, podéis consultar la dirección:</p>
<p><a href="http://docs.phonegap.com/en/edge/guide_cli_index.md.html#The%20Command-Line%20Interface_advanced_plugin_options" target="_blank">http://docs.phonegap.com/en/edge/guide_cli_index.md.html#The%20Command-Line%20Interface_advanced_plugin_options</a></p>
<!-- ********************************************************************* -->
<h2 id="uso-de-la-api-de-phonegap">Uso de la API de PhoneGap</h2>
<p>A continuación vamos a ver ejemplos de uso de algunos de estos <em>plugins</em>.</p>
<blockquote>
<p>En todos los casos tendremos que esperar a que la API de PhoneGap se haya terminado de cargar.</p>
</blockquote>
<!-- ******************************** -->
<h3 id="informacin-del-dispositivo-_orgapachecordovadevice_">Información del dispositivo (<em>org.apache.cordova.device</em>)</h3>
<p>Este <em>plugin</em> permite obtener información del dispositivo como modelo, sistema operativo, etc. Para su utilización tenemos que esperar que se cargue la API de PhoneGap y ya podremos acceder a estos valores a través de las propiedades del objeto &quot;<code>device</code>&quot;:</p>
<pre><code>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);
function onDeviceReady() {
    console.log(device.cordova);
}
</code></pre><p>Las propiedades que podemos utilizar son:</p>
<ul>
<li><em>device.cordova</em>: Obtiene la versión de PhoneGap.</li>
<li><em>device.model</em>: Obtiene el nombre o modelo del dispositivo.</li>
<li><em>device.platform</em>: Obtiene el nombre del sistema operativo.</li>
<li><em>device.uuid</em>: Devuelve el <em>Universally Unique Identifier</em> (UUID) del dispositivo.</li>
<li><em>device.version</em>: Obtiene la versión del sistema operativo utilizado.</li>
</ul>
<p>Para más información podéis consultar la siguiente página:</p>
<p><a href="http://plugins.cordova.io/#/package/org.apache.cordova.device" target="_blank">http://plugins.cordova.io/#/package/org.apache.cordova.device</a></p>
<!-- ******************************** -->
<h3 id="informacin-sobre-la-conexin-_orgapachecordovanetwork-information_">Información sobre la conexión (<em>org.apache.cordova.network-information</em>)</h3>
<p>Este <em>plugin</em> proporciona información sobre el tipo de conexión a la red y además añade eventos para saber cuando el dispositivo se conecta o se desconecta de la red.</p>
<p>Para obtener información sobre el tipo de conexión utilizamos el objeto <code>connection.type</code> el cual podrá contener los siguientes valores:</p>
<ul>
<li>Connection.UNKNOWN</li>
<li>Connection.ETHERNET</li>
<li>Connection.WIFI</li>
<li>Connection.CELL_2G</li>
<li>Connection.CELL_3G</li>
<li>Connection.CELL_4G</li>
<li>Connection.CELL</li>
<li>Connection.NONE</li>
</ul>
<p>A continuación se incluye un ejemplo de uso:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkConnection</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> networkState = navigator.connection.type;

    <span class="hljs-keyword">var</span> states = {};
    states[Connection.UNKNOWN]  = <span class="hljs-string">'Tipo de conexión desconocida'</span>;
    states[Connection.ETHERNET] = <span class="hljs-string">'Ethernet'</span>;
    states[Connection.WIFI]     = <span class="hljs-string">'WiFi'</span>;
    states[Connection.CELL_2G]  = <span class="hljs-string">'Cell 2G'</span>;
    states[Connection.CELL_3G]  = <span class="hljs-string">'Cell 3G'</span>;
    states[Connection.CELL_4G]  = <span class="hljs-string">'Cell 4G'</span>;
    states[Connection.CELL]     = <span class="hljs-string">'Cell generic'</span>;
    states[Connection.NONE]     = <span class="hljs-string">'Sin conexión'</span>;

    alert(<span class="hljs-string">'Tipo de conexión: '</span> + states[networkState]);
}

checkConnection();
</code></pre>
<p>Para escuchar a los eventos de <em>online</em> y <em>offline</em>, igual que para el resto de eventos, simplemente tendremos que hacer:</p>
<pre><code class="lang-javascript"><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"online"</span>, onOnline, <span class="hljs-literal">false</span>);
<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">"offline"</span>, onOffline, <span class="hljs-literal">false</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onOnline</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Se ha conectado a la red</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onOffline</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// Se ha perdido la conexión a la red</span>
}
</code></pre>
<!-- ******************************** -->
<h3 id="brjula-_orgapachecordovadevice-orientation_">Brújula (<em>org.apache.cordova.device-orientation</em>)</h3>
<p>Este <em>plugin</em> proporciona el acceso a la brújula, el cual devuelve la orientación del dispositivo con respecto al norte como si de una brújula se tratase. El valor retornado estará en grados entre 0 y 359.99.</p>
<p>Una vez haya cargado la API de PhoneGap podremos utilizar los siguientes métodos:</p>
<ul>
<li><code>navigator.compass.getCurrentHeading</code></li>
<li><code>navigator.compass.watchHeading</code></li>
<li><code>navigator.compass.clearWatch</code></li>
</ul>
<p>Para obtener el valor actual utilizamos el método <code>navigator.compass.getCurrentHeading</code>, el cual puede devolver la orientación o un error en caso de no pode acceder. A continuación se incluye un ejemplo de uso:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onSuccess</span><span class="hljs-params">(heading)</span> </span>{
    alert(<span class="hljs-string">'Orientación: '</span> + heading.magneticHeading + <span class="hljs-string">'º'</span>);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onError</span><span class="hljs-params">(error)</span> </span>{
    alert(<span class="hljs-string">'Compass Error: '</span> + error.code);
};

navigator.compass.getCurrentHeading(onSuccess, onError);
</code></pre>
<p>Pero este método solo devuelve un valor. Si queremos que el valor se actualice según se mueva el dispositivo tenemos que utilizar el método <code>navigator.compass.watchHeading</code>. Este método llamará a la función &quot;success&quot; cada vez que obtenga la orientación con la frecuencia que se indique en las opciones, por ejemplo:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onSuccess</span><span class="hljs-params">(heading)</span> </span>{
    <span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'heading'</span>);
    element.innerHTML = <span class="hljs-string">'Orientacion: '</span> + heading.magneticHeading;
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onError</span><span class="hljs-params">(compassError)</span> </span>{
    alert(<span class="hljs-string">'Compass error: '</span> + compassError.code);
};

<span class="hljs-keyword">var</span> options = {
    frequency: <span class="hljs-number">3000</span>
}; <span class="hljs-comment">// actualizar cada 3 segundos</span>

<span class="hljs-keyword">var</span> watchID = navigator.compass.watchHeading(onSuccess, onError, options);
</code></pre>
<p>El valor de retorno de esta función (<code>watchID</code>) nos permite detener el listener cuando queramos mediante la función:</p>
<pre><code class="lang-javascript">navigator.compass.clearWatch(watchID);
</code></pre>
<blockquote>
<p>Este <em>plugin</em> tiene un funcionamiento muy similar al del acelerómetro o al de la geolocalización, todos disponen un método para obtener el valor actual y métodos para obtener los valores en tiempo real (con una determinada frecuencia) y para detener el listener.</p>
</blockquote>
<!-- ********************************************************************* -->
<!-- ********************************************************************* -->
<!-- ********************************************************************* -->
<!-- ********************************************************************* -->
<h1 id="ejercicios---phonegap-avanzado">Ejercicios - PhoneGap avanzado</h1>
<!-- ********************************************************************* -->
<h2 id="ejercicio-1---usando-la-api-de-phonegap-05-puntos">Ejercicio 1 - Usando la API de PhoneGap (0.5 puntos)</h2>
<p>Para completar el último ejercicio se pide que realicéis los siguientes pasos para todas las aplicaciones:</p>
<ul>
<li>Desactivar el <em>fullscreen</em> de las aplicaciones (ya que está activado por defecto).</li>
<li>Crear un icono para cada aplicación con una resolución de 128x128 píxeles. Podéis hacer solamente uno por aplicación que se utilice para ambas plataformas y para todas las resoluciones. El dibujo del icono podéis diseñarlo vosotros mismos o simplemente poner el logo de la tecnología utilizada: HTML5, Bootstrap, JQuery Mobile o Sencha Touch y el nombre de la misma.</li>
<li>Crear un <em>splash screen</em> para cada aplicación con una resolución de 480x800px. Podéis hacer solamente uno por aplicación que se utilice para ambas plataformas y para todas las resoluciones. Al icual que el icono, el dibujo del <em>splash screen</em> podéis crearlo vosotros mismos o simplemente poner el logo de la tecnología utilizada: HTML5, Bootstrap, JQuery Mobile o Sencha Touch y el nombre de la misma. En este caso tenemos que asegurarnos de configurar bien el fichero <code>config.xml</code>:
<br/><pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-title">preference</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"SplashScreen"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"screen"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">preference</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"SplashScreenDelay"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"10000"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">gap:splash</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"www/screen.png"</span> /&gt;</span>
</code></pre>
<br/>
Comprobad también que las imágenes se hayan copiado correctamente en las carpetas de recursos de las plataformas.</li>
</ul>
<!-- ********************************************************************* -->
<h2 id="ejercicio-2---usando-la-api-de-phonegap-25-puntos">Ejercicio 2 - Usando la API de PhoneGap (2.5 puntos)</h2>
<p>En este ejercicio vamos a probar algunas de las funcionalidades que nos ofrece la API de PhoneGap.</p>
<p>En primer lugar creamos un nuevo proyecto con el nombre &quot;PhoneGapAPI&quot; y modificamos el HTML del &quot;Hola Mundo&quot; para que cargue la librería de PhoneGap y espere hasta que esté lista (ver el código básico de ejemplo que se incluye en la sección &quot;Eventos - <em>deviceready</em>&quot;).</p>
<p>A continuación vamos a crear un log de eventos en esta aplicación. En primer lugar creamos la sección HTML donde mostraremos el log:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"log"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"margin:5px;padding:5px;border:1px solid silver;color:gray"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Desde JavaScript podremos añadir código a esta sección haciendo:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> element = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"log"</span>);
element.innerHTML += <span class="hljs-string">"- API de PhoneGap cargada.&lt;br/&gt;"</span>;
</code></pre>
<p>Se pide que mostréis mensajes de log cuando se produzcan los siguientes eventos:</p>
<ul>
<li>Se cargue la API de PhoneGap (<em>deviceready</em>).</li>
<li>La aplicación se ponga en <em>background</em> (<em>pause</em>).</li>
<li>La aplicación salga de <em>background</em> (<em>resume</em>).</li>
<li>Se pulse el botón atrás (<em>backbutton</em>).</li>
<li>Se pulse el botón menú (<em>menubutton</em>).</li>
<li>Se pulse el botón para bajar el volumen (<em>volumedownbutton</em>).</li>
<li>Se pulse el botón para subir el volumen (<em>volumeupbutton</em>).</li>
</ul>
<p>Instalar el <em>plugin</em> para obtener información sobre el dispositivo utilizado y mostrarla en una tabla antes del log.</p>
<p>Instalar el <em>plugin</em> para obtener información sobre la conexión y añadir esta información:</p>
<ul>
<li>Añadir al log log eventos de <em>online</em> y <em>offline</em>.</li>
<li>Añadir el tipo de conexión a la tabla inicial de información del dispositivo.</li>
</ul>
<p>Instalar el <em>plugin</em> de la brújula y configurar el listener para que actualice la orientación del dispositivo cada segundo (mostrar junto a la información inicial del dispositivo).</p>
<p>Instala otro <em>plugin</em> (el que tu quieras de entre los oficiales de PhoneGap) y añade la información del mismo a la aplicación.</p>
<p>A continuación se puede ver una captura de ejemplo de la aplicación a desarrollar:</p>
<p><img src="images/web_phonegap/ejercicio_2_avanzado.png" width="250"/></p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./capitulo_phonegap.html" class="navigation navigation-prev " aria-label="Previous page: PhoneGap 1. Introducción"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./capitulo_laravel_1.html" class="navigation navigation-next " aria-label="Next page: Laravel 1. Introducción"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
